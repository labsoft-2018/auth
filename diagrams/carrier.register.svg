<?xml version="1.0" encoding="utf-8" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 20010904//EN" "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd"><svg xmlns="http://www.w3.org/2000/svg" width="874" height="576" xmlns:xlink="http://www.w3.org/1999/xlink"><source><![CDATA[Title: Carrier registration flow
CarrierMobile->Auth: /register :email :password :type carrier
Auth->User: createUser
User->Auth: user
Auth->Credentials: createCredential
Credentials->Auth: credential
Auth->Carrier: /create-carrier
Carrier->Auth: carrier
Note over Auth: Generate token for user
Auth->CarrierMobile: 200 token

# Note: if create-carrier fails, we should revert the created user and credential]]></source><desc>Carrier registration flow</desc><defs><marker viewBox="0 0 5 5" markerWidth="5" markerHeight="5" orient="auto" refX="5" refY="2.5" id="markerArrowBlock"><path d="M 0 0 L 5 2.5 L 0 5 z"></path></marker><marker viewBox="0 0 9.6 16" markerWidth="4" markerHeight="16" orient="auto" refX="9.6" refY="8" id="markerArrowOpen"><path d="M 9.6,8 1.92,16 0,13.7 5.76,8 0,2.286 1.92,0 9.6,8 z"></path></marker></defs><g class="title"><path d="M10,10C89.3,19.3 183.5,0.7 241.3,10.0C239.9,37.7 242.6,15.3 241.3,43.0C90.7,52.3 65.5,33.7 10.0,43.0C11.3,37.7 8.7,23.8 10.0,10.0" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></path><text x="15" y="29" style="font-size: 16px; font-family: danielbd;"><tspan x="15">Carrier registration flow</tspan></text></g><g class="actor"><path d="M10,53C49.9,58.5 91.3,47.5 148.7,53.0C150.4,89.1 147.0,59.9 148.7,96.0C66.0,101.5 32.2,90.5 10.0,96.0C11.7,71.5 8.3,80.6 10.0,53.0" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></path><text x="20" y="77" style="font-size: 16px; font-family: danielbd;"><tspan x="20">CarrierMobile</tspan></text></g><g class="actor"><path d="M10,513C112.0,507.5 115.4,518.5 148.7,513.0C150.4,545.3 147.0,519.9 148.7,556.0C126.5,550.5 52.1,561.5 10.0,556.0C8.3,545.7 11.7,532.8 10.0,513.0" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></path><text x="20" y="537" style="font-size: 16px; font-family: danielbd;"><tspan x="20">CarrierMobile</tspan></text></g><path d="M79.3,96.0C62.7,333.9 96.0,412.9 79.3,513.0" stroke="#000000" fill="none" style="stroke-width: 2;"></path><g class="actor"><path d="M411.984375,53C447.8,55.5 462.7,50.5 475.7,53.0C477.4,85.7 473.9,74.7 475.7,96.0C442.7,98.5 443.3,93.5 412.0,96.0C410.3,81.3 413.7,87.6 412.0,53.0" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></path><text x="421.984375" y="77" style="font-size: 16px; font-family: danielbd;"><tspan x="421.984375">Auth</tspan></text></g><g class="actor"><path d="M411.984375,513C453.8,515.5 445.0,510.5 475.7,513.0C477.4,545.7 473.9,541.1 475.7,556.0C422.2,553.5 460.3,558.5 412.0,556.0C410.3,519.9 413.7,523.3 412.0,513.0" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></path><text x="421.984375" y="537" style="font-size: 16px; font-family: danielbd;"><tspan x="421.984375">Auth</tspan></text></g><path d="M443.8,96.0C427.1,330.7 460.5,446.3 443.8,513.0" stroke="#000000" fill="none" style="stroke-width: 2;"></path><g class="actor"><path d="M534.9921875,53C571.2,55.5 588.5,50.5 598.7,53.0C600.4,89.1 596.9,62.5 598.7,96.0C583.4,93.5 563.6,98.5 535.0,96.0C536.7,85.7 533.3,63.3 535.0,53.0" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></path><text x="544.9921875" y="77" style="font-size: 16px; font-family: danielbd;"><tspan x="544.9921875">User</tspan></text></g><g class="actor"><path d="M534.9921875,513C546.9,515.5 588.5,510.5 598.7,513.0C596.9,527.8 600.4,523.3 598.7,556.0C588.5,558.5 583.4,553.5 535.0,556.0C533.3,545.7 536.7,531.7 535.0,513.0" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></path><text x="544.9921875" y="537" style="font-size: 16px; font-family: danielbd;"><tspan x="544.9921875">User</tspan></text></g><path d="M566.8,96.0C550.1,330.6 583.5,255.0 566.8,513.0" stroke="#000000" fill="none" style="stroke-width: 2;"></path><g class="actor"><path d="M618.6640625,53C689.2,48.3 637.5,57.7 736.2,53.0C734.5,88.1 737.9,85.0 736.2,96.0C637.5,100.7 670.4,91.3 618.7,96.0C620.4,63.5 616.9,76.6 618.7,53.0" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></path><text x="628.6640625" y="77" style="font-size: 16px; font-family: danielbd;"><tspan x="628.6640625">Credentials</tspan></text></g><g class="actor"><path d="M618.6640625,513C708.0,508.3 717.4,517.7 736.2,513.0C737.9,543.8 734.5,537.4 736.2,556.0C680.3,551.3 668.8,560.7 618.7,556.0C616.9,524.9 620.4,529.4 618.7,513.0" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></path><text x="628.6640625" y="537" style="font-size: 16px; font-family: danielbd;"><tspan x="628.6640625">Credentials</tspan></text></g><path d="M677.4,96.0C694.1,345.8 660.7,196.1 677.4,513.0" stroke="#000000" fill="none" style="stroke-width: 2;"></path><g class="actor"><path d="M756.1953125,53C830.5,49.5 800.1,56.5 844.6,53.0C846.3,85.7 842.9,64.5 844.6,96.0C807.5,92.5 803.4,99.5 756.2,96.0C754.5,64.1 757.9,86.0 756.2,53.0" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></path><text x="766.1953125" y="77" style="font-size: 16px; font-family: danielbd;"><tspan x="766.1953125">Carrier</tspan></text></g><g class="actor"><path d="M756.1953125,513C830.5,509.5 770.3,516.5 844.6,513.0C842.9,523.3 846.3,545.7 844.6,556.0C775.3,559.5 794.8,552.5 756.2,556.0C754.5,545.7 757.9,530.0 756.2,513.0" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></path><text x="766.1953125" y="537" style="font-size: 16px; font-family: danielbd;"><tspan x="766.1953125">Carrier</tspan></text></g><path d="M800.4,96.0C817.1,237.4 783.7,412.9 800.4,513.0" stroke="#000000" fill="none" style="stroke-width: 2;"></path><g class="signal"><text x="89.3359375" y="123.5" style="font-size: 16px; font-family: danielbd;"><tspan x="89.3359375">/register :email :password :type carrier</tspan></text><path d="M79.3,139.0C385.5,124.4 137.7,153.6 443.8,139.0" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></path></g><g class="signal"><text x="457.24609375" y="166.5" style="font-size: 16px; font-family: danielbd;"><tspan x="457.24609375">createUser</tspan></text><path d="M443.8,182.0C467.1,186.9 486.2,177.1 566.8,182.0" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></path></g><g class="signal"><text x="486.27734375" y="209.5" style="font-size: 16px; font-family: danielbd;"><tspan x="486.27734375">user</tspan></text><path d="M566.8,225.0C488.4,229.9 463.5,220.1 443.8,225.0" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></path></g><g class="signal"><text x="489.796875" y="252.5" style="font-size: 16px; font-family: danielbd;"><tspan x="489.796875">createCredential</tspan></text><path d="M443.8,268.0C517.6,258.7 525.9,277.3 677.4,268.0" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></path></g><g class="signal"><text x="520.0859375" y="295.5" style="font-size: 16px; font-family: danielbd;"><tspan x="520.0859375">credential</tspan></text><path d="M677.4,311.0C542.6,301.7 640.1,320.3 443.8,311.0" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></path></g><g class="signal"><text x="556.828125" y="338.5" style="font-size: 16px; font-family: danielbd;"><tspan x="556.828125">/create-carrier</tspan></text><path d="M443.8,354.0C672.2,368.3 529.4,339.7 800.4,354.0" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></path></g><g class="signal"><text x="591.953125" y="381.5" style="font-size: 16px; font-family: danielbd;"><tspan x="591.953125">carrier</tspan></text><path d="M800.4,397.0C686.9,411.3 529.4,382.7 443.8,397.0" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></path></g><g class="note"><path d="M330.8125,417C385.1,408.0 457.9,426.0 556.8,417.0C558.1,422.3 555.5,435.1 556.8,450.0C502.6,459.0 495.1,441.0 330.8,450.0C332.1,442.1 329.5,425.9 330.8,417.0" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></path><text x="335.8125" y="436" style="font-size: 16px; font-family: danielbd;"><tspan x="335.8125">Generate token for user</tspan></text></g><g class="signal"><text x="213.140625" y="477.5" style="font-size: 16px; font-family: danielbd;"><tspan x="213.140625">200 token</tspan></text><path d="M443.8,493.0C293.7,478.4 330.0,507.6 79.3,493.0" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></path></g></svg>